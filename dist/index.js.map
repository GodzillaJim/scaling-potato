{"version":3,"file":"index.js","mappings":"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","sources":["webpack://collaborator/./src/config/config.ts","webpack://collaborator/./src/config/logger.config.ts","webpack://collaborator/./src/config/mongodb.config.ts","webpack://collaborator/./src/controllers/auth.controller.ts","webpack://collaborator/./src/controllers/user.controller.ts","webpack://collaborator/./src/index.ts","webpack://collaborator/./src/middleware/errorHandler.ts","webpack://collaborator/./src/middleware/limiters.ts","webpack://collaborator/./src/models/roles/index.ts","webpack://collaborator/./src/models/users/index.ts","webpack://collaborator/./src/routes/auth/index.ts","webpack://collaborator/./src/routes/index.ts","webpack://collaborator/./src/routes/user/index.ts","webpack://collaborator/./src/server.ts","webpack://collaborator/external commonjs \"autobind-decorator\"","webpack://collaborator/external commonjs \"cors\"","webpack://collaborator/external commonjs \"dotenv\"","webpack://collaborator/external commonjs \"express\"","webpack://collaborator/external commonjs \"express-rate-limit\"","webpack://collaborator/external commonjs \"helmet\"","webpack://collaborator/external commonjs \"http-errors\"","webpack://collaborator/external commonjs \"mongoose\"","webpack://collaborator/external commonjs \"morgan\"","webpack://collaborator/external commonjs \"winston\"","webpack://collaborator/external node-commonjs \"crypto\"","webpack://collaborator/webpack/bootstrap","webpack://collaborator/webpack/before-startup","webpack://collaborator/webpack/startup","webpack://collaborator/webpack/after-startup"],"sourcesContent":["import { CorsOptions } from 'cors';\r\nimport { Request, Response } from 'express';\r\nimport logger from './logger.config';\r\n\r\n/* Cors Config  */\r\nconst corsOptions: CorsOptions = {\r\n  allowedHeaders: [\r\n    'Origin',\r\n    'X-Requested-With',\r\n    'Content-Type',\r\n    'Accept',\r\n    'X-Access-Token',\r\n    'Authorization',\r\n  ],\r\n  credentials: true,\r\n  methods: 'GET,HEAD,OPTIONS,PUT,PATCH,POST,DELETE',\r\n  preflightContinue: false,\r\n};\r\n\r\nexport const corsOptionsWhiteList = (request: Request, callback: Function) => {\r\n  const whiteList = ['localhost:4200', 'localhost:3000'];\r\n  const origin = request.header('origin')\r\n    ? request.header('origin')\r\n    : request.header('host');\r\n  if (origin && whiteList.some((host: string) => origin.includes(host))) {\r\n    corsOptions['origin'] = true;\r\n    callback(null, corsOptions);\r\n    return;\r\n  }\r\n  corsOptions['origin'] = false;\r\n  callback(new Error(`Origin not allowed by CORS: ${origin}`), corsOptions);\r\n};\r\n\r\nexport const morganConfig = (tokens: any, req: Request, res: Response) => {\r\n  const log = [\r\n    tokens.method(req, res),\r\n    tokens.url(req, res),\r\n    '-',\r\n    'statusCode:',\r\n    tokens.status(req, res),\r\n    '-',\r\n    'response-size:',\r\n    tokens.res(req, res, 'content-length'),\r\n    '-',\r\n    'response-time:',\r\n    tokens['response-time'](req, res),\r\n    'ms',\r\n  ].join(' ');\r\n  logger.info(log);\r\n  return log;\r\n};\r\n","import { createLogger, format, transports } from \"winston\";\r\n\r\nconst logger = createLogger({\r\n  level: \"info\",\r\n  format: format.combine(\r\n    format.simple(),\r\n    format.timestamp(),\r\n    format.printf((info: any) => `[${info.timestamp}] ${info.level}: ${info.message}`)\r\n  ),\r\n  defaultMeta: { service: \"user-service\" },\r\n  transports: [\r\n    new transports.File({\r\n      filename: \"./logs/error.log\",\r\n      level: \"error\",\r\n    }),\r\n    new transports.File({\r\n      filename: \"./logs/info.log\",\r\n      level: \"info\",\r\n    }),\r\n  ],\r\n});\r\n\r\nexport default logger;\r\n","import { config } from \"dotenv\";\r\nimport logger from \"./logger.config\";\r\nimport mongoose from \"mongoose\";\r\n\r\nexport default class MongoDb {\r\n  constructor() {\r\n    config();\r\n  }\r\n  connect() {\r\n    mongoose\r\n      .connect(process.env.MONGO_DB, {\r\n        servername: \"COLLABOR@TOR\",\r\n      })\r\n      .then(() => {\r\n        logger.info(\"MongoDb connected\");\r\n      })\r\n      .catch((error) => {\r\n        logger.error(error);\r\n      });\r\n  }\r\n}\r\n","import { NextFunction, Request, Response } from \"express\";\r\n\r\nimport UserModel from \"../models/users\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { boundClass } from \"autobind-decorator\";\r\nimport createHttpError from \"http-errors\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst User = UserModel;\r\n\r\n@boundClass\r\nexport default class AuthController {\r\n  constructor() {\r\n    //\r\n  }\r\n\r\n  async authUser(req: Request, res: Response, next: NextFunction) {\r\n    //\r\n  }\r\n}\r\n","import { NextFunction, Request, Response } from \"express\";\r\n\r\nimport UserModel from \"../models/users\";\r\nimport { boundClass } from \"autobind-decorator\";\r\nimport createHttpError from \"http-errors\";\r\n\r\nconst User = UserModel;\r\n\r\n@boundClass\r\nexport default class UserController {\r\n  constructor() {}\r\n\r\n  async createUsers(req: Request, res: Response, next: NextFunction) {\r\n    try {\r\n      const newUser = new User({ ...req.body });\r\n      const userSaved = await newUser.save();\r\n      res.status(200).json(userSaved);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  }\r\n\r\n  async getUsers(req: Request, res: Response, next: NextFunction) {\r\n    try {\r\n      const users = await User.find();\r\n      res.status(200).json(users);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  }\r\n\r\n  async getSingleUser(req: Request, res: Response, next: NextFunction) {\r\n    const { id } = req.params;\r\n    try {\r\n      const user = await User.findOne({ _id: id });\r\n      if (user) {\r\n        res.status(200).json(user);\r\n        return;\r\n      }\r\n      res.status(404);\r\n      const error = new createHttpError.NotFound();\r\n      next(error);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  }\r\n\r\n  async removeUser(req: Request, res: Response, next: NextFunction) {\r\n    const { id } = req.params;\r\n    try {\r\n      const userDeleted = await User.deleteOne({ _id: id });\r\n      res.status(200).json({\r\n        message: `User ${id} successfully deleted`,\r\n      });\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  }\r\n\r\n  async updateUser(req: Request, res: Response, next: NextFunction) {\r\n    const { id } = req.params;\r\n    const user = { ...req.body };\r\n    try {\r\n      const updated = await User.findOneAndUpdate({ _id: id }, user, {\r\n        new: true,\r\n      });\r\n      res.status(200).json(updated);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  }\r\n}\r\n","import MongoDb from \"./config/mongodb.config\";\r\nimport app from \"./server\";\r\nimport { config } from \"dotenv\";\r\nimport logger from \"./config/logger.config\";\r\n\r\nconfig();\r\nconst port = process.env.PORT || 3000;\r\nconst mongodb = new MongoDb();\r\nmongodb.connect();\r\n\r\napp.listen(port, () => {\r\n  logger.info(`connected to port ${port}`);\r\n});\r\n","import { NextFunction, Request, Response } from 'express';\r\nimport logger from '../config/logger.config';\r\nimport createError, { HttpError } from 'http-errors';\r\n\r\nexport const notFound = (req: Request, res: Response, next: NextFunction) => {\r\n  res.status(404);\r\n  const error: any = new createError.NotFound();\r\n  next(error);\r\n};\r\n\r\nexport const handleError = (\r\n  err: HttpError,\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  const jsonError = {\r\n    error: {\r\n      statusCode: res.statusCode || 500,\r\n      message: err.message,\r\n    },\r\n  };\r\n  logger.error(\r\n    `statusCode: ${jsonError.error.statusCode}; statusText: ${jsonError.error.message}; stacks: ${err.stack};`\r\n  );\r\n  res.status(jsonError.error.statusCode).json(jsonError);\r\n};\r\n","import rateLimit from 'express-rate-limit';\r\n\r\nexport const mainLimiter = rateLimit({\r\n  windowMs: 10 * 60 * 1000,\r\n  max: 100,\r\n  message: {\r\n    status: 429,\r\n    message: 'Too Many Requests',\r\n  },\r\n});\r\n","import mongoose from \"mongoose\";\r\n\r\nexport const RoleSchema = new mongoose.Schema(\r\n  {\r\n    name: String,\r\n    createdBy: String,\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.model(\"Role\", RoleSchema);\r\n","import { Schema, model } from \"mongoose\";\r\n\r\nimport { RoleSchema } from \"../roles\";\r\nimport crypto from \"crypto\";\r\n\r\nconst UserSchema = new Schema({\r\n  email: {\r\n    type: String,\r\n    unique: true,\r\n    required: true,\r\n  },\r\n  firstName: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  lastName: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  disabled: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n  verified: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  emailVerfiedAt: {\r\n    type: Date,\r\n    default: undefined,\r\n  },\r\n  emailVerificationCode: String,\r\n  salt: String,\r\n  roles: {\r\n    type: [RoleSchema],\r\n    default: [],\r\n  },\r\n});\r\n\r\nUserSchema.methods.setPassword = function (password: string) {\r\n  this.salt = crypto.randomBytes(16).toString(\"hex\");\r\n  this.hash = crypto.pbkdf2Sync(password, this.salt, 1000, 64, \"sha1\").toString(\"hex\");\r\n};\r\n\r\nUserSchema.methods.validatePassword = function (password: string) {\r\n  const hash = crypto.pbkdf2Sync(password, this.salt, 1000, 64, \"sha1\").toString(\"hex\");\r\n  return this.password === hash;\r\n};\r\n\r\nexport default model(\"User\", UserSchema);\r\n","import express, { Router } from \"express\";\r\n\r\nimport AuthController from \"../../controllers/auth.controller\";\r\nimport { mainLimiter } from \"../../middleware/limiters\";\r\n\r\nconst router: Router = express.Router();\r\n\r\nconst authController = new AuthController();\r\nrouter.route(\"/\").post([mainLimiter, authController.authUser]);\r\n\r\nexport default router;\r\n","import { Router } from \"express\";\r\nimport authRoute from \"./auth\";\r\nimport userRoute from \"./user\";\r\n\r\nconst router = Router();\r\n\r\nrouter.get(\"/\", (_req, res) => {\r\n  res.json({ health: \"App is up!\" });\r\n});\r\nrouter.use(\"/auth\", authRoute);\r\nrouter.use(\"/user\", userRoute);\r\n\r\nexport default router;\r\n","import express, { Router } from \"express\";\r\n\r\nimport UserController from \"../../controllers/user.controller\";\r\nimport { mainLimiter } from \"../../middleware/limiters\";\r\n\r\nconst router: Router = express.Router();\r\nconst userController = new UserController();\r\n\r\nrouter.route(\"/\").get([mainLimiter, userController.getUsers]);\r\nrouter\r\n  .route(\"/:id\")\r\n  .get([mainLimiter, userController.getSingleUser])\r\n  .delete([mainLimiter, userController.removeUser])\r\n  .put([mainLimiter, userController.updateUser]);\r\n\r\nexport default router;\r\n","import { corsOptionsWhiteList, morganConfig } from \"./config/config\";\r\nimport { handleError, notFound } from \"./middleware/errorHandler\";\r\n\r\nimport cors from \"cors\";\r\nimport dotenv from \"dotenv\";\r\nimport express from \"express\";\r\nimport helmet from \"helmet\";\r\nimport morgan from \"morgan\";\r\nimport router from \"./routes\";\r\n\r\ndotenv.config();\r\n\r\nconst app = express();\r\n\r\nconst middleware = [\r\n  morgan(morganConfig),\r\n  helmet(),\r\n  cors(corsOptionsWhiteList),\r\n  express.json(),\r\n  express.urlencoded({ extended: false }),\r\n];\r\n\r\napp.use(middleware);\r\n\r\nconst errorHandlers = [notFound, handleError];\r\n\r\napp.use(errorHandlers);\r\napp.get(\"/\", (_req, res) => {\r\n  return res.json({ App: \"App is up!\" });\r\n});\r\napp.use(\"/api/v1\", router);\r\n\r\nexport default app;\r\n","module.exports = require(\"autobind-decorator\");","module.exports = require(\"cors\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"express-rate-limit\");","module.exports = require(\"helmet\");","module.exports = require(\"http-errors\");","module.exports = require(\"mongoose\");","module.exports = require(\"morgan\");","module.exports = require(\"winston\");","module.exports = require(\"crypto\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"sourceRoot":""}